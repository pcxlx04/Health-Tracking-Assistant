# Health Tracking Assistant

這是一個整合 RAG 知識庫與個人生理指標計算的 LineBot，用於追蹤睡眠、飲食與慢性病數據。

## 核心功能

1. **RAG 知識檢索**：根據用戶輸入自動檢索 JSON 指南，提供標準化的醫學建議（如血壓分級、睡眠時數標準）。
2. **精準熱量計算**：在 Python 端透過 Mifflin-St Jeor 公式計算基礎代謝率 (BMR) 與每日建議攝取總熱量 (TDEE)，確保數據穩定性。
3. **飲食累計統計**：自動加總當日所有攝取的熱量，並即時回報剩餘熱量配額。
4. **多維度追蹤**：
   - **飲食**：單次紀錄熱量推估與今日統計進度。
   - **睡眠**：對照年齡標準進行時數判定與品質改善建議。
   - **慢性病**：針對血壓、血糖等數值提供風險分級與行動指南。

## 技術架構

- **後端框架**: Flask
- **AI 模型**: OpenAI GPT-4o-mini
- **資料庫**: SQLite
- **核心技術**: 檢索增強生成 (RAG)
- **接入渠道**: Line Messaging API

## 檔案結構

- `app.py`: 主要執行程式與 AI 解析邏輯。
- `rag_reference/`: 存放睡眠、飲食、慢性病的 JSON 標準知識庫。
- `health_assistant.db`: 存儲用戶檔案與健康日誌的資料庫。
- `.env`: 存放 LINE 與 OpenAI 的 API 金鑰。
- `requirements.txt`: 專案所需的套件依賴清單。

## 安裝與執行

1. **安裝環境依賴**：
   ```bash
   pip install -r requirements.txt

2. **配置環境變數： 建立 .env 檔案並填入以下內容**：
   ```bash
   LINE_CHANNEL_ACCESS_TOKEN=你的TOKEN
   LINE_CHANNEL_SECRET=你的SECRET
   OPENAI_API_KEY=你的API金鑰

3. **啟動服務**：
   ```bash
   python app.py

## 使用範例
- **更新個人檔案**: 點擊「更新個人檔案」，依提示提供性別、身高、體重、年齡以建立計算基準。
- **紀錄飲食**: 輸入飲食項目，系統會顯示該餐熱量、今日累計及建議。
- **紀錄健康數據**: 輸入「血壓 135/85」，系統會回饋對應的風險等級與標準。

## 免責聲明
本系統提供之所有建議與數據分析僅供參考，不構成醫療診斷或專業醫療建議。如有健康疑慮請務必諮詢專業醫療人員。
